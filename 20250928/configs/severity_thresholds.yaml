## Severity thresholds for outlier classification.
## "mild", "moderate", "severe" are z-score levels.
## Global defaults apply unless overridden per metric.

global:
  mild: 1.0
  moderate: 2.0
  severe: 3.0

## Per-metric overrides.
## Metrics with naturally higher variance get wider thresholds;
## metrics where even small shifts matter get tighter thresholds.

per_metric:
  # ADC peak is very stable run-to-run; small shifts are significant
  intt_adc_peak:
    mild: 1.0
    moderate: 2.0
    severe: 3.0

  # ADC median tracks peak but is noisier
  intt_adc_median_p50:
    mild: 1.5
    moderate: 2.5
    severe: 4.0

  # p90 is inherently noisier (upper tail)
  intt_adc_p90:
    mild: 2.0
    moderate: 3.0
    severe: 5.0

  # KS p-value is volatile; only extreme values matter
  intt_phi_uniform_r1:
    mild: 2.0
    moderate: 3.0
    severe: 5.0

  # Chi2/NDF: values near 1 are normal, >5 is concerning
  intt_phi_chi2_reduced:
    mild: 1.5
    moderate: 2.5
    severe: 4.0

  # BCO peak: discrete steps are normal (phase toggling); only drifts matter
  intt_bco_peak:
    mild: 2.0
    moderate: 3.0
    severe: 5.0

  # Cluster size: very stable, shifts indicate real problems
  cluster_size_intt_mean:
    mild: 1.0
    moderate: 2.0
    severe: 3.0

  # Cluster phi RMS: moderate natural variation
  cluster_phi_intt_rms:
    mild: 1.5
    moderate: 2.5
    severe: 4.0

  # Hit asymmetry: often NaN with current data; wide thresholds
  intt_hits_asym:
    mild: 2.0
    moderate: 3.0
    severe: 5.0

  # --- INTT physics QA metrics ---

  # Landau MPV: very stable, like ADC peak
  intt_adc_landau_mpv:
    mild: 1.0
    moderate: 2.0
    severe: 3.0

  # BCO R1 modulation: small amplitude expected; increases flag timing issues
  intt_bco_mod_r1:
    mild: 2.0
    moderate: 3.0
    severe: 5.0

  # Sensor occupancy median: moderate natural variation
  intt_sensor_occupancy_median:
    mild: 1.5
    moderate: 2.5
    severe: 4.0

  # --- MVTX chip health metrics ---

  # Dead/hot chip fractions: moderate thresholds (small fractions expected)
  mvtx_deadchip_frac_l0:
    mild: 1.5
    moderate: 2.5
    severe: 4.0

  mvtx_hotchip_frac_l0:
    mild: 1.5
    moderate: 2.5
    severe: 4.0

  mvtx_deadchip_frac_l1:
    mild: 1.5
    moderate: 2.5
    severe: 4.0

  mvtx_hotchip_frac_l1:
    mild: 1.5
    moderate: 2.5
    severe: 4.0

  mvtx_deadchip_frac_l2:
    mild: 1.5
    moderate: 2.5
    severe: 4.0

  mvtx_hotchip_frac_l2:
    mild: 1.5
    moderate: 2.5
    severe: 4.0

  # --- TPC laser timing metrics ---

  # Laser timing: tight thresholds (timing shifts matter)
  tpc_laser_time_mean_north:
    mild: 1.5
    moderate: 2.5
    severe: 3.5

  tpc_laser_time_mean_south:
    mild: 1.5
    moderate: 2.5
    severe: 3.5

  # N-S delta: very tight (differential timing is precise)
  tpc_laser_time_delta_NS:
    mild: 1.5
    moderate: 2.5
    severe: 3.5

  # --- TPC shape and resolution metrics ---

  # Ring slope: wide thresholds (depends on gas conditions)
  tpc_phisize_ring_slope_avg:
    mild: 2.0
    moderate: 3.0
    severe: 5.0

  tpc_zsize_ring_slope_avg:
    mild: 2.0
    moderate: 3.0
    severe: 5.0

  # Resolution: wide thresholds (depends on alignment, gas, drift)
  tpc_resolution_rphi_mean:
    mild: 2.0
    moderate: 3.0
    severe: 5.0

  tpc_resolution_z_mean:
    mild: 2.0
    moderate: 3.0
    severe: 5.0

  # Sector ADC uniformity: moderate thresholds
  tpc_sector_adc_uniform_chi2:
    mild: 1.5
    moderate: 2.5
    severe: 4.0
